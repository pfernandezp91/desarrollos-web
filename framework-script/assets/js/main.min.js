/*! ** ucol.mx - Base v1.1.0 */
//  ** Última modificación: '08-03-2023';

var UDC = UDC || {};
// Variable de la URL para obtener la URl segun ambiente.
UDC.root ='http://localhost:8888/';

// Rutas de los archivos
// Rura de los archivos assets
UDC.path = UDC.root + 'assets/';
// Ruta de los archivos de imagenes
UDC.imagesPath = UDC.path + 'img/';
// Ruta de los archivos de scripts
UDC.scriptsPath = UDC.path + 'js/';
// Ruta de los archivos de estilos
UDC.stylesPath = UDC.path + 'css/';

// Variables de la plantilla
var uco = 'Universidad de Colima',
    // Variables que se reciben de la pagina web para construir la plantilla (SITE_* | PAGE_* | NAVBAR_* | SECTION_*)
    // Variable para obtener el template del sitio (undefined = DEFAULT para APPS | 1 = plantillas de sistemas internos)
    SITE_TEMPLATE, // undefined | 1
    // Variable para obtener el menu del sitio a traves de un array de objetos
    SITE_MENU, // array
    // Variable para obtener el sidebar del sitio a traves de un array de objetos
    SITE_SIDEBAR, // array
    // Variable para obtener el titulo del sitio (string)
    SITE_TITLE, // string
    // Variable para obtener el logo del sitio (string | url de la imagen que se debe cargar en el header de la pagina)
    SITE_LOGO, // string | url
    // Variable para obtener el logo secundario para colocar del lado derecho de la cabecera del sitio (string | url de la imagen que se debe cargar en el header de la pagina)
    SECONDARY_LOGO, // string | url
    // Variable para obtener el titulo de la pagina 
    PAGE_TITLE, // string
    // Variable para obtener la descripcion de la pagina
    PAGE_DESCRIPTION, // string
    // Variable para obtener un array de objetos para construir el breadcrumb de navegacion de la pagina
    BREADCRUMB_SITE, // array
    // Variable para obtener un array de objetos para construir el breadcrumb de sesion de la pagina
    BREADCRUMB_SESSION, // array
    // Variable para definir el modo de la pagina (container o container-fluid) | default: container-fluid
    CONTAINER_MODE, // container | default: container-fluid
    // Definimos si nuestra pagina web tendrá espacio superior (true) | default: false
    SECTION_SUPERIOR, // false
    // Definimos si nuestra pagina web tendrá espacio inferior (true) | default: false
    SECTION_SUPERIOR, // false 
    // Revisamos si existe una variable para cargar los componentes de VUE
    IMPORT_COMPONENTS, // array

    // Variables de armado de la plantillas
    // Bandera para saber si existe una variable logo en la pagina web
    LOAD_LOGO = '',
    // Bandera para saber si existe una variable title en la pagina web
    LOAD_TITLE = '',
    // Bandera para saber si existe una variable udc en la pagina web
    TEXT_UDC = '';

// Cargar logo segun plantilla
LOAD_LOGO =  !SITE_TEMPLATE ? !SITE_LOGO ? `${UDC.root}assets/img/ucol_white.png` : SITE_LOGO : `${UDC.root}assets/img/ucol_templates.png`;
SECONDARY_LOGO = window.SECONDARY_LOGO || '';
// Cargar titulo
TEXT_UDC = uco;
// Cargamos el titulo de la pagina web si existe | por default es "Universidad de Colima
LOAD_TITLE = window.SITE_TITLE || uco; 
// Si es verdadero se muestra el espacio superior de la pagina web (SECTION_SUPERIOR) | por default es falso
SECTION_SUPERIOR = window.SECTION_SUPERIOR || false;
// Si trae un array de objetos se carga el menu de la pagina web (SITE_MENU) | por default es un array vacio
SITE_MENU = window.SITE_MENU || [];
// Si trae un array de objetos se carga el sidebar de la pagina web (SITE_SIDEBAR) | por default es un array vacio
SITE_SIDEBAR = window.SITE_SIDEBAR || [];
// Si trae un array de objetos se carga el breadcrumb de la pagina web (BREADCRUMB_SITE) | por default es un array vacio
BREADCRUMB_SITE = window.BREADCRUMB_SITE || [];
// Si trae un array de objetos se carga el breadcrumb de sesion de la pagina web (BREADCRUMB_SESSION) | por default es un array vacio
BREADCRUMB_SESSION = window.BREADCRUMB_SESSION || [];
// Si trae un array de objetos se carga los componentes de VUE de la pagina web (IMPORT_COMPONENTS) | por default es un array vacio
IMPORT_COMPONENTS = window.IMPORT_COMPONENTS || [];

// Iniciar proceso de construcción de la plantilla
UDC.secBuilder = function () {
    // Obtenemos el body de la página web
    var body = document.body;
    // Obtenemos el head de la página web
    var head = document.head;
    // Indicamos el periodo rectoral para el footer de la página web (periodoRectoral + 3) | el + 3 es para que se muestre el periodo actual más los 3 siguientes años que dura el periodo
    var periodoRectoral = 2022;
    // Indicamos los metadatos de la página web (metaData)
    var metaData = `
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
        <title>${LOAD_TITLE != '' && LOAD_TITLE != uco ? LOAD_TITLE + ' | ' : ''} ${uco}</title>
        <link rel="image_src" href="${UDC.imagesPath}favicon.ico"/>
        <link rel="icon" href="${UDC.imagesPath}favicon.ico" type="image/x-icon"/>
        <link rel="apple-touch-icon" href="${UDC.imagesPath}favicon.ico">
        ${SITE_TEMPLATE === 1 ? `<link href="${UDC.stylesPath}templates/${SITE_TEMPLATE}.css" rel="stylesheet">` : ``}
    `;
    // Agregamos los metadatos al head de la página web
    head.innerHTML = metaData + head.innerHTML
	// Template header de la página web (header) | el header es el encabezado de la página web que contiene el logo de la universidad y el menu de navegación de la página web
    var navBar = `<nav class="navbar navbar-expand-md bg-theme p-0">
                    <button type="button" onclick="goBack()" class="btn btn-info btn-back-history text-light py-3 d-none">
                        <i class="material-icons float-left">chevron_left</i>
                    </button>
                    <div class="${CONTAINER_MODE == undefined ? 'container-fluid' : CONTAINER_MODE}">
                        <a class="navbar-brand d-flex align-items-center position-relative py-3" href="https://www.ucol.mx" target="_blank">
                            <img width="${!SITE_TEMPLATE ? 30 : ''}" height="${!SITE_TEMPLATE ? 30 : ''}" class="icon-site img-fluid float-start me-1" src="${LOAD_LOGO}" alt="${uco}"> 
                            ${!SITE_LOGO && SITE_TEMPLATE ? `<small class="`+ (!SITE_TEMPLATE ? 'text-light' : 'float-title-site')+`">`+LOAD_TITLE+`</small>` : ''}
                        </a>
                        ${SITE_MENU.length > 0 ? `
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Mostrar menu">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbar-menu">
                            <ul class="navbar-nav ms-auto mb-2 mb-lg-0"></ul>
                        </div>` : ''}
                        ${(SECONDARY_LOGO != '' ? `<img height="40" class="float-end ms-1" src="${SECONDARY_LOGO}" alt="${uco}"> ` : ``)}
                        <button id="sidebar-toggle" class="navbar-toggler d-md-none">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                </nav>`;

    var section_title = `${SECTION_SUPERIOR ? `<div class="bg-lime border-bottom ${BREADCRUMB_SITE ? `pb-3` : `py-4`}">
                                                    <div class="${CONTAINER_MODE == undefined ? 'container-fluid' : CONTAINER_MODE} small">
                                                        <div class="row small">
                                                            <div class="col-12 col-md-6">
                                                                ${BREADCRUMB_SITE ? `<ol class="breadcrumb breadcrumb-nav mb-0 py-2"></ol>` : ``}  
                                                            </div>
                                                            <div class="col-12 col-md-6" style="--bs-breadcrumb-divider: '|';">
                                                                ${BREADCRUMB_SESSION ? ` <ol class="breadcrumb breadcrumb-session mb-0 py-2 justify-content-end"></ol>` : ``}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="${CONTAINER_MODE == undefined ? 'container-fluid' : CONTAINER_MODE} position-relative">
                                                        ${PAGE_TITLE ? `<h1 class="h4 text-center text-uppercase mb-0">${PAGE_TITLE}</h1>` : ``}
                                                        ${PAGE_DESCRIPTION ? `<p class="text-center mx-0 mx-md-5 mb-0">${PAGE_DESCRIPTION}</p>` : ``}
                                                    </div>
                                                </div>` : ``}`;

    // Template footer de la página web (footer) | el footer es el pie de página de la página web
    var footer = `<div id="info-os" class="d-none">&nbsp;</div>
                <div id="info-chrome" class="d-none">&nbsp;</div>
                <div class="bd-footer py-3 bg-theme-2 text-light" role="contentinfo">
                    <div class="${CONTAINER_MODE == undefined ? 'container-fluid' : CONTAINER_MODE}">
                        <div class="row">
                            <div class="col-12 text-center">&copy; Derechos Reservados ${periodoRectoral}-${periodoRectoral + 3} ${uco}</div>
                        </div>
                    </div>
                </div>`;

    // Creamos el elemento header de la página web
    var navBarApp = document.createElement('header');
    // Creamos el elemento section para el titulo de la página web
    var sectionTitleApp = document.createElement('section');
    sectionTitleApp.className = 'section-title';
    // Creamos el elemento section superior de la página web
    var sectionSuperior = document.createElement('section');
    sectionSuperior.id = 'superior';
    // Creamos el elemento footer de la página web
    var footerApp = document.createElement('footer');
    // Agregamos el contenido de la plantilla al header de la página web
    navBarApp.innerHTML = navBar;
    // Agregamos el contenido de la plantilla al section de la página web
    sectionTitleApp.innerHTML = section_title;
    // Agregamos el contenido de la plantilla al section superior de la página web
    sectionSuperior.innerHTML = `<template id="seccion-superior" class="d-block"></template>`;
    // Agregamos el contenido de la plantilla al footer de la página web
    footerApp.innerHTML = footer;

    // Insetamos el section superior de la página web
    body.prepend(sectionSuperior);

    // Para cargar los elementos con prepend se debe de invertir el orden de los elementos (estos se cargan al inicio del body)
    // Insetamos el titulo de la página web
    body.prepend(sectionTitleApp);

    // Insetamos el header de la página web
    body.prepend(navBarApp);

    // Para cargar los elementos con append se deben de cargar en el orden correcto (estos se cargan al final del body)
    // Insetamos el footer de la página web
    body.append(footerApp);
};

(function(){
    // Se ejecuta la funcion de construcción de la plantilla
    UDC.secBuilder();
})();
